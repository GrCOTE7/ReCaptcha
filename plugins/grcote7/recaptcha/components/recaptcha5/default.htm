<script src="https://www.google.com/recaptcha/api.js?render={{ sitekey }}"></script>

<script>
    function onSubmit(token) {
      document.getElementById("re-form-email").submit();
    }
  </script>

<div class="content">
    <hr>
    <p>The reCaptcha component is added</p>

    <div class="{% if  vars['method']== 'GET' %}green{% else %}red{% endif %}">
        {% for key, val in vars %}
            {{ key|title }} : {{ val }}<br>
        {% endfor %}
    </div>

    <div id="result">
        RESULT
    </div>

    <div id="p-recaptcha-result">
        CAPTCHA RESULT
    </div>
{#
    <form action="javascript:void(0)" method="POST" id="re-form-email"
    data-request="recaptcha::onSubscribe"
    data-request-validate
    data-request-flash
    data-request-update="'recaptcha::partials/recaptcha-result': '#p-recaptcha-result'">
    #}
    <form id="re-form-email"
    data-request="recaptcha::onSubscribe"
    data-request-validate
    data-request-flash
    data-request-update="'recaptcha::partials/recaptcha-result': '#p-recaptcha-result'">

        {{ form_token() }}
        <div class="mb-3 blocemailggle">
            <label for="email" class="form-label" id="label">
                Votre email
            </label>
            <input type="email" name="email" id="email" placeholder="The best !" value="TestEmail@GG.com" class="form-control">
            <p class="ggle">
                This site is protected by reCAPTCHA and the Google
                <a href="https://policies.google.com/privacy">Privacy Policy</a> and
                <a href="https://policies.google.com/terms">Terms of Service</a> apply.
            </p>
        </div>

        <input type="text" name="g-recaptcha-response" id="g-recaptcha-response"></input>

        {# <div id="recaptcha" class="g-recaptcha"></div> #}

        {# <button
         class="g-recaptcha"
        {# type="submit" #}
        {# data-action='submit' #}
        {# > #}
        {# </button> #}
        {# <div type = "submit" class="g-recaptcha"
        data-sitekey="SITE_KEY"
        data-callback="onSubmit"
        data-size="invisible">
        </div> #}

        <button type="submit" class="btn btn-primary" id="submit" nme="submit"
        data-attach-loading
        {# data-sitekey="SITE_KEY" #}
        data-callback='onSubmit'
        {# data-action='submit' #}
        >Soumettre</button>

    </form>
</div>

